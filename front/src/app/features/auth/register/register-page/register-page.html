<section class="bg-white min-h-screen">
  <div class="container-auth pt-10">

    <!-- Back arrow (mobile + desktop) -->
    <div class="mb-6">
      <a routerLink="/" class="inline-block">
        <img
          src="/images/common/left-arrow.svg"
          alt="Back"
          class="w-[39px]"
        />
      </a>
    </div>

    <!-- Mobile logo only -->
    <div class="md:hidden mb-6">
      <img
        src="/images/illustrations/welcome-auth-mobile.png"
        alt="MDD"
        class="mx-auto"
      />
    </div>

    <!-- Title -->
    <h1 class="text-[24px] text-center mb-8">
      Inscription
    </h1>

    <!-- Form -->
    <form 
      [formGroup]="registerForm" 
      (ngSubmit)="onSubmit()"
      class="max-w-sm mx-auto flex flex-col gap-7 mt-8"
    >
      @if (getGeneralErrors().length > 0) {
        <div class="bg-danger-50 border border-danger-200 text-danger-800 px-4 py-3 rounded-lg text-sm">
          @for (error of getGeneralErrors(); track error) {
            <p>{{ error }}</p>
          }
        </div>
      }

      <app-form-input 
        formControlName="username"
        label="Nom d'utilisateur"
        type="text"
        placeholder="Entrez votre nom d'utilisateur"
        [errorMessage]="getFieldError('username') || (usernameControl?.touched && usernameControl?.invalid ? 'Ce champ est requis' : undefined)"
        [formControlDisabled]="isSubmitting()"
        [required]="true">
      </app-form-input>

      <app-form-input 
        formControlName="email"
        label="Adresse e-mail"
        type="email"
        placeholder="votre@email.com"
        [errorMessage]="getFieldError('email') || (emailControl?.touched && emailControl?.invalid ? (emailControl?.errors?.['email'] ? 'Email invalide' : 'Ce champ est requis') : undefined)"
        [formControlDisabled]="isSubmitting()"
        [required]="true">
      </app-form-input>

      <app-form-input 
        formControlName="password"
        label="Mot de passe"
        type="password"
        placeholder="Entrez votre mot de passe"
        [errorMessage]="getFieldError('password') || (passwordControl?.touched && passwordControl?.invalid ? (getPasswordErrorMessage(passwordControl?.errors || null) || 'Ce champ est requis') : undefined)"
        [formControlDisabled]="isSubmitting()"
        [required]="true">
      </app-form-input>

      <button 
        type="submit" 
        class="btn-primary mx-auto mt-2"
        [disabled]="isSubmitting() || registerForm.invalid"
      >
        @if (isSubmitting()) {
          Inscription en cours...
        } @else {
          S'inscrire
        }
      </button>

    </form>

  </div>
</section>
